!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng2-ui-auth",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ng2-ui-auth"]={},t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators)}(this,(function(t,e,o,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};Object.create;function a(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}Object.create;function p(t,e){return/^(?:[a-z]+:)?\/\//i.test(e)?e:[t,e].join("/").replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}function u(t){return Object.keys(t).map((function(e){return t[e]?encodeURIComponent(e)+"="+encodeURIComponent(t[e]):e})).join("&")}function c(t){t||"undefined"==typeof window||(t=window);try{return t&&t.location?t.location.origin?t.location.origin:t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:""):null}catch(t){return null}}function h(t){var e;return t.split("&").reduce((function(t,o){return o&&(e=o.split("="),t[decodeURIComponent(e[0])]=void 0===e[1]||decodeURIComponent(e[1])),t}),{})}function d(t){var e={};return Object.keys(t).map((function(t){return t.indexOf(".")>-1?t.substring(0,t.indexOf(".")):t})).filter((function(t,e,o){return o.indexOf(t)===e})).forEach((function(o){if(t[o])e[o]=t[o];else{var r={};Object.keys(t).filter((function(t){return t.startsWith(o+".")})).forEach((function(e){r[e.substr(o.length+1)]=t[e]})),e[o]=d(r)}})),e}function l(){return"object"==typeof cordova||-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}var f,g={facebook:{name:"facebook",url:"/auth/facebook",redirectUri:c()+"/",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",additionalUrlParams:{display:"popup"},scope:["email"],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/v2/auth",additionalUrlParams:{display:"popup",prompt:void 0,login_hint:void 0,access_type:void 0,include_granted_scopes:void 0,"openid.realm":void 0,hd:void 0},scope:["openid","email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:452,height:633},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",scope:["r_emailaddress"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:527,height:582},state:"STATE"},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",scope:["user_read"],scopeDelimiter:" ",additionalUrlParams:{display:"popup"},oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",additionalUrlParams:{display:"popup"},scope:["wl.emails"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:c()+"/",scope:["email"],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:1028,height:529}},spotify:{name:"spotify",url:"/auth/spotify",authorizationEndpoint:"https://accounts.spotify.com/authorize",scope:["","user-read-email"],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:500,height:530},state:function(){return encodeURIComponent(Math.random().toString(36).substr(2))}}};(f=t.StorageType||(t.StorageType={})).NONE="none",f.MEMORY="memory",f.LOCAL_STORAGE="localStorage",f.SESSION_STORAGE="sessionStorage",f.COOKIE="cookie",f.SESSION_COOKIE="sessionCookie";var y=new e.InjectionToken("config.options"),v=function(){function e(e){this.options={withCredentials:!1,tokenRoot:null,baseUrl:"/",loginUrl:"/auth/login",signupUrl:"/auth/signup",unlinkUrl:"/auth/unlink/",tokenName:"token",tokenSeparator:"_",tokenPrefix:"ng2-ui-auth",authHeader:"Authorization",authToken:"Bearer",storageType:t.StorageType.LOCAL_STORAGE,cordova:void 0,resolveToken:function(t,e){var o=t&&(t.access_token||t.token||t.data);if(!o)return null;if("string"==typeof o)return o;if("object"!=typeof o)return null;var r=e.tokenRoot&&e.tokenRoot.split(".").reduce((function(t,e){return t[e]}),o),n=r?r[e.tokenName]:o[e.tokenName];return n||null},providers:{}},this.options=Object.assign(Object.assign({},this.options),e),this.mergeWithDefaultProviders()}return e.prototype.updateProviders=function(t){this.options.providers=Object.assign(Object.assign({},this.options.providers||{}),t),this.mergeWithDefaultProviders()},e.prototype.mergeWithDefaultProviders=function(){var t=this;Object.keys(this.options.providers).forEach((function(e){e in g&&(t.options.providers[e]=Object.assign(Object.assign({},g[e]),t.options.providers[e]))}))},e}();v.decorators=[{type:e.Injectable}],v.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[y]}]}]};var m=function(){},O=function(e){function o(o){var r=e.call(this)||this;return r.config=o,r.store={},r.storageType=t.StorageType.MEMORY,r.updateStorageType(o.options.storageType)||console.warn(o.options.storageType+" is not available."),r}return function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(o,e),o.prototype.updateStorageType=function(t){return!!this.checkIsStorageAvailable(t)&&(this.storageType=t,!0)},o.prototype.get=function(e){switch(this.storageType){case t.StorageType.COOKIE:case t.StorageType.SESSION_COOKIE:return this.getCookie(e);case t.StorageType.LOCAL_STORAGE:case t.StorageType.SESSION_STORAGE:return window[this.storageType].getItem(e);case t.StorageType.MEMORY:return this.store[e];case t.StorageType.NONE:default:return null}},o.prototype.set=function(e,o,r){switch(this.storageType){case t.StorageType.COOKIE:case t.StorageType.SESSION_COOKIE:this.setCookie(e,o,this.storageType===t.StorageType.COOKIE?r:"");break;case t.StorageType.LOCAL_STORAGE:case t.StorageType.SESSION_STORAGE:window[this.storageType].setItem(e,o);break;case t.StorageType.MEMORY:this.store[e]=o;break;case t.StorageType.NONE:}},o.prototype.remove=function(e){switch(this.storageType){case t.StorageType.COOKIE:case t.StorageType.SESSION_COOKIE:this.removeCookie(e);break;case t.StorageType.LOCAL_STORAGE:case t.StorageType.SESSION_STORAGE:window[this.storageType].removeItem(e);break;case t.StorageType.MEMORY:delete this.store[e];break;case t.StorageType.NONE:}},o.prototype.checkIsStorageAvailable=function(e){switch(e){case t.StorageType.COOKIE:case t.StorageType.SESSION_COOKIE:return this.isCookieStorageAvailable();case t.StorageType.LOCAL_STORAGE:case t.StorageType.SESSION_STORAGE:return this.isWindowStorageAvailable(e);case t.StorageType.NONE:case t.StorageType.MEMORY:return!0;default:return!1}},o.prototype.isWindowStorageAvailable=function(t){try{var e=window&&t in window&&null!==window[t];if(e){var o=Math.random().toString(36).substring(7);window[t].setItem(o,""),window[t].removeItem(o)}return e}catch(t){return!1}},o.prototype.isCookieStorageAvailable=function(){try{if(document&&"cookie"in document){var t=Math.random().toString(36).substring(7);this.setCookie(t,"test",new Date(Date.now()+6e4).toUTCString());var e=this.getCookie(t);return this.removeCookie(t),"test"===e}return!1}catch(t){return!1}},o.prototype.setCookie=function(t,e,o,r){void 0===o&&(o=""),void 0===r&&(r="/"),document.cookie=t+"="+e+(o?"; expires="+o:"")+"; path="+r},o.prototype.removeCookie=function(t,e){void 0===e&&(e="/"),this.setCookie(t,"",new Date(0).toUTCString(),e)},o.prototype.getCookie=function(t){return document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+t+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")},o}(m);O.decorators=[{type:e.Injectable}],O.ctorParameters=function(){return[{type:v}]};var w=function(){function t(t,e){this.storage=t,this.config=e,this.tokenName=this.config.options.tokenPrefix?[this.config.options.tokenPrefix,this.config.options.tokenName].join(this.config.options.tokenSeparator):this.config.options.tokenName}return t.prototype.getToken=function(){return this.storage.get(this.tokenName)},t.prototype.getPayload=function(t){if(void 0===t&&(t=this.getToken()),t&&3===t.split(".").length)try{var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(this.b64DecodeUnicode(e))}catch(t){return}},t.prototype.setToken=function(t){var e;if(t&&(e="string"==typeof t?t:this.config.options.resolveToken(t,this.config.options))){var o=this.getExpirationDate(e);this.storage.set(this.tokenName,e,o?o.toUTCString():"")}},t.prototype.removeToken=function(){this.storage.remove(this.tokenName)},t.prototype.isAuthenticated=function(t){if(void 0===t&&(t=this.getToken()),t){if(3===t.split(".").length)try{var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=JSON.parse(this.b64DecodeUnicode(e)).exp;if(o)return!(Math.round((new Date).getTime()/1e3)>=o)||(this.storage.remove(this.tokenName),!1)}catch(t){return!0}return!0}return!1},t.prototype.getExpirationDate=function(t){void 0===t&&(t=this.getToken());var e=this.getPayload(t);if(e&&e.exp&&Math.round((new Date).getTime()/1e3)<e.exp){var o=new Date(0);return o.setUTCSeconds(e.exp),o}return null},t.prototype.logout=function(){var t=this;return new r.Observable((function(e){t.storage.remove(t.tokenName),e.next(),e.complete()}))},t.prototype.setStorageType=function(t){return this.storage.updateStorageType(t)},t.prototype.b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},t}();w.decorators=[{type:e.Injectable}],w.ctorParameters=function(){return[{type:m},{type:v}]};var T=function(){function t(t,e){this.shared=t,this.config=e}return t.prototype.intercept=function(t,e){var o,r=this.config.options,n=r.authHeader,i=r.authToken,a=this.shared.getToken(),s=this.shared.isAuthenticated()&&!t.headers.has(n)?t.clone({setHeaders:(o={},o[n]=i+" "+a,o)}):t;return e.handle(s)},t}();T.decorators=[{type:e.Injectable}],T.ctorParameters=function(){return[{type:w},{type:v}]};var b=function(){function t(){}return t.prototype.open=function(t,e,o){void 0===o&&(o=l());var n=function(t){return Object.keys(t).map((function(e){return null===t[e]||void 0===t[e]?e:e+"="+t[e]})).join(",")}(this.prepareOptions(e.popupOptions)),i=o?"_blank":e.name,a="undefined"!=typeof window?window.open(t,i,n):null;return a?(a.focus&&a.focus(),r.of(a)):r.throwError(new Error("Popup was not created"))},t.prototype.waitForClose=function(t,e,o){return void 0===e&&(e=l()),void 0===o&&(o=c()),e?this.eventListener(t,o):this.pollPopup(t,o)},t.prototype.eventListener=function(t,e){return void 0===e&&(e=c()),t?r.merge(r.fromEvent(t,"exit").pipe(n.delay(100),n.map((function(){throw new Error("Authentication Canceled")}))),r.fromEvent(t,"loadstart")).pipe(n.switchMap((function(o){if(!t||t.closed)return r.Observable.throw(new Error("Authentication Canceled"));if(0!==o.url.indexOf(e))return r.EMPTY;var n=document.createElement("a");if(n.href=o.url,n.search||n.hash){var i=n.search.substring(1).replace(/\/$/,""),a=h(n.hash.substring(1).replace(/\/$/,"")),s=h(i),p=Object.assign(Object.assign({},s),a);if(t.close(),p.error)throw p.error;return r.of(p)}return r.EMPTY})),n.take(1)):r.throwError(new Error("Popup was not created"))},t.prototype.pollPopup=function(t,e){return void 0===e&&(e=c()),r.interval(50).pipe(n.switchMap((function(){if(!t||t.closed)return r.throwError(new Error("Authentication Canceled"));var o=c(t);if(o&&(0===e.indexOf(o)||0===o.indexOf(e))&&(t.location.search||t.location.hash)){var n=t.location.search.substring(1).replace(/\/$/,""),i=h(t.location.hash.substring(1).replace(/[\/$]/,"")),a=h(n);t.close();var s=Object.assign(Object.assign({},a),i);return s.error?r.throwError(s.error):r.of(s)}return r.EMPTY})),n.take(1))},t.prototype.prepareOptions=function(t){var e=(t=t||{}).width||500,o=t.height||500;return Object.assign({width:e,height:o,left:window.screenX+(window.outerWidth-e)/2,top:window.screenY+(window.outerHeight-o)/2.5,toolbar:t.visibleToolbar?"yes":"no"},t)},t}();b.decorators=[{type:e.Injectable}];var S=function(){function t(t,e,o){this.http=t,this.shared=e,this.config=o}return t.prototype.login=function(t,e){var o=this;return this.http.post(e||p(this.config.options.baseUrl,this.config.options.loginUrl),t).pipe(n.tap((function(t){return o.shared.setToken(t)})))},t.prototype.signup=function(t,e){return this.http.post(e||p(this.config.options.baseUrl,this.config.options.signupUrl),t)},t}();S.decorators=[{type:e.Injectable}],S.ctorParameters=function(){return[{type:o.HttpClient},{type:w},{type:v}]};var k=function(){function t(t,e,o){this.shared=t,this.local=e,this.oauth=o}return t.prototype.login=function(t,e){return this.local.login(t,e)},t.prototype.signup=function(t,e){return this.local.signup(t,e)},t.prototype.logout=function(){return this.shared.logout()},t.prototype.authenticate=function(t,e){return this.oauth.authenticate(t,e)},t.prototype.link=function(t,e){return this.oauth.authenticate(t,e)},t.prototype.unlink=function(t,e){return this.oauth.unlink(t,e)},t.prototype.isAuthenticated=function(){return this.shared.isAuthenticated()},t.prototype.getToken=function(){return this.shared.getToken()},t.prototype.setToken=function(t){this.shared.setToken(t)},t.prototype.removeToken=function(){this.shared.removeToken()},t.prototype.getPayload=function(){return this.shared.getPayload()},t.prototype.setStorageType=function(t){return this.shared.setStorageType(t)},t.prototype.getExpirationDate=function(){return this.shared.getExpirationDate()},t}();k.decorators=[{type:e.Injectable}],k.ctorParameters=function(){return[{type:w},{type:S},{type:I}]};var E=function(){function t(t,e,o,r){this.authService=t,this.storage=e,this.oauth=o,this.shared=r}return t.prototype.go=function(t,e,o,n){if(window){var i=u(function t(e){var o={};return Object.keys(e).forEach((function(r){if("object"==typeof e[r]){var n=t(e[r]);Object.keys(n).forEach((function(t){return o[r+"."+t]=n[t]}))}else o[r]=e[r]})),o}(function t(e){var o={};return Object.keys(e).forEach((function(r){switch(typeof e[r]){case"number":case"string":case"boolean":o[r]=e[r];break;case"function":var n=t({tmp:e[r]()});o[r]=n.tmp;break;case"object":e[r]?o[r]=t(e[r]):o[r]=null}})),o}({options:e,authorizationData:o,userData:n})));return this.storage.set("ng2-ui-auth-REDIRECT",i,""),window.open(t,"_self"),r.of({})}return r.throwError("Failed to redirect")},t.prototype.isRedirect=function(){var t=this.storage.get("ng2-ui-auth-REDIRECT");if(t){var e=window,o=c(e),r=d(h(t)).redirectUri;return!(null==r||null==o||0!==r.indexOf(o)&&0!==o.indexOf(r)||null==e.location.search&&null==e.location.hash)}},t.prototype.handleRedirect=function(){var t=this,e=this.storage.get("ng2-ui-auth-REDIRECT");if(e){var o=window,i=c(o),a=d(h(e)),s=a.options,p=a.authorizationData,u=a.userData,l=s.redirectUri;if(!(null==l||null==i||0!==l.indexOf(i)&&0!==i.indexOf(l)||null==o.location.search&&null==o.location.hash)){var f=o.location.search.substring(1).replace(/\/$/,""),g=h(o.location.hash.substring(1).replace(/[\/$]/,"")),y=h(f),v=Object.assign(Object.assign({},y),g);if(v.error)throw r.throwError(v.error);return this.oauth.getProvider(s).exchangeForToken(s,p,v,u).pipe(n.tap((function(e){t.shared.setToken(e),t.storage.remove("ng2-ui-auth-REDIRECT")})))}return r.throwError("Not at valid redirect URI")}return r.throwError("No stored options for redirect")},t}();E.decorators=[{type:e.Injectable}],E.ctorParameters=function(){return[{type:k},{type:m},{type:I},{type:w}]};var C=function(){function t(t,e,o,r){this.http=t,this.popup=e,this.config=o,this.redirect=r}return t.prototype.open=function(t,e){var o=this,r=this.config.options.baseUrl?p(this.config.options.baseUrl,t.url):t.url;return t.doRedirect?this.http.post(r,t).pipe(n.mergeMap((function(r){return o.redirect.go([t.authorizationEndpoint,u(r)].join("?"),t,r,e)}))):this.popup.open("about:blank",t,this.config.options.cordova).pipe(n.switchMap((function(e){return o.http.post(r,t).pipe(n.tap((function(o){return e?e.location.replace([t.authorizationEndpoint,u(o)].join("?")):void 0})),n.switchMap((function(r){return o.popup.waitForClose(e,o.config.options.cordova,t.redirectUri).pipe(n.map((function(t){return{authorizationData:r,oauthData:t}})))})))})),n.switchMap((function(r){var n=r.authorizationData,i=r.oauthData;return o.exchangeForToken(t,n,i,e)})))},t.prototype.exchangeForToken=function(t,e,o,r){var n={oauthOptions:t,authorizationData:e,oauthData:o,userData:r},i=this.config.options,a=i.withCredentials,s=i.baseUrl,u=t.method,c=void 0===u?"POST":u,h=t.url,d=s?p(s,h):h;return this.http.request(c,d,{body:n,withCredentials:a})},t}();C.decorators=[{type:e.Injectable}],C.ctorParameters=function(){return[{type:o.HttpClient},{type:b},{type:v},{type:E}]};var j=function(){function t(t,e,o,r){this.http=t,this.popup=e,this.config=o,this.redirect=r}return t.prototype.open=function(t,e){var o=this,i=this.getAuthorizationData(t),a=[t.authorizationEndpoint,u(i)].join("?");return t.doRedirect?this.redirect.go(a,t,i,e):this.popup.open(a,t,this.config.options.cordova).pipe(n.switchMap((function(e){return o.popup.waitForClose(e,o.config.options.cordova,t.redirectUri)})),n.switchMap((function(n){return"token"!==t.responseType&&t.url?n.state&&n.state!==i.state?r.throwError('OAuth "state" mismatch'):o.exchangeForToken(t,i,n,e):r.of(d(n))})))},t.prototype.exchangeForToken=function(t,e,o,r){var n={authorizationData:e,oauthData:o,userData:r},i=this.config.options,a=i.baseUrl,s=i.withCredentials,u=t.url,c=t.method,h=void 0===c?"POST":c,d=a?p(a,u):u;return this.http.request(h,d,{body:n,withCredentials:s})},t.prototype.getAuthorizationData=function(t){var e=t.responseType,o=void 0===e?"code":e,r=t.clientId,n=t.redirectUri,i=void 0===n?c()||"":n,a=t.scopeDelimiter,p=void 0===a?",":a,u=t.scope,h=t.state,d=t.additionalUrlParams,l="function"==typeof h?h():h;return s([["response_type",o],["client_id",r],["redirect_uri",i]],h?[["state",l]]:[],u?[["scope",u.join(p)]]:[],d?Object.keys(d).map((function(t){var e=d[t];return"string"==typeof e?[t,e]:"function"==typeof e?[t,e()]:null===e?[t,""]:["",""]})):[]).filter((function(t){return!!t[0]})).reduce((function(t,e){var o;return Object.assign(Object.assign({},t),((o={})[e[0]]=e[1],o))}),{})},t}();j.decorators=[{type:e.Injectable}],j.ctorParameters=function(){return[{type:o.HttpClient},{type:b},{type:v},{type:E}]};var I=function(){function t(t,e,r,n){this.http=t,this.shared=e,this.config=r,this.popup=n,this.depProviders=[{provide:o.HttpClient,useValue:this.http},{provide:b,useValue:this.popup},{provide:v,useValue:this.config}],this.deps=[o.HttpClient,b,v]}return t.prototype.authenticate=function(t,e){var o=this;return this.getProvider(t).open(this.config.options.providers[t],e||{}).pipe(n.tap((function(e){o.config.options.providers[t].url&&o.shared.setToken(e)})))},t.prototype.getProvider=function(t){return"1.0"===("string"==typeof t?this.config.options.providers[t].oauthType:t.oauthType)?e.Injector.create(s(this.depProviders,[{provide:C,deps:this.deps}])).get(C):e.Injector.create(s(this.depProviders,[{provide:j,deps:this.deps}])).get(j)},t.prototype.unlink=function(t,e,o){return void 0===e&&(e=p(this.config.options.baseUrl,this.config.options.unlinkUrl)),void 0===o&&(o="POST"),this.http.request(o,e,{body:{provider:t}})},t}();I.decorators=[{type:e.Injectable}],I.ctorParameters=function(){return[{type:o.HttpClient},{type:w},{type:v},{type:b}]};var D=function(){function t(t){this.redirect=t,this.onLogin=new e.EventEmitter,this.onLoginError=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.redirect.isRedirect()&&this.redirect.handleRedirect().subscribe({next:function(e){return t.onLogin.emit(e)},error:function(e){return t.onLoginError.emit(e)}})},t}();D.decorators=[{type:e.Directive,args:[{selector:"[authRedirect]"}]}],D.ctorParameters=function(){return[{type:E}]},D.propDecorators={onLogin:[{type:e.Output}],onLoginError:[{type:e.Output}]};var P=function(){function t(){}return t.forRoot=function(e,r){return void 0===e&&(e={}),void 0===r&&(r=!0),{ngModule:t,providers:s([{provide:y,useValue:e},{provide:v,useClass:v,deps:[y]},{provide:m,useClass:O,deps:[v]},{provide:w,useClass:w,deps:[m,v]},{provide:S,useClass:S,deps:[o.HttpClient,w,v]},{provide:b,useClass:b,deps:[v]},{provide:I,useClass:I,deps:[o.HttpClient,w,v,b]},{provide:k,useClass:k,deps:[w,S,I]},{provide:E,useClass:E,deps:[k,m,I,w]}],r?[{provide:o.HTTP_INTERCEPTORS,useClass:T,multi:!0,deps:[w,v]}]:[])}},t}();P.decorators=[{type:e.NgModule,args:[{imports:[o.HttpClientModule],declarations:[D],exports:[]}]}],t.AuthService=k,t.BrowserStorageService=O,t.CONFIG_OPTIONS=y,t.ConfigService=v,t.JwtInterceptor=T,t.LocalService=S,t.Ng2UiAuthModule=P,t.Oauth1Service=C,t.Oauth2Service=j,t.OauthService=I,t.PopupService=b,t.RedirectDirective=D,t.SharedService=w,t.StorageService=m,t.ɵb=E,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng2-ui-auth.umd.min.js.map